<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Day 4 - tidyverse and plots and such | DLL 2021, R section</title>
  <meta name="description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Day 4 - tidyverse and plots and such | DLL 2021, R section" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  <meta name="github-repo" content="darachm/dll-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Day 4 - tidyverse and plots and such | DLL 2021, R section" />
  
  <meta name="twitter:description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  

<meta name="author" content="darachm" />
<meta name="author" content="etc?" />
<meta name="author" content="etc?" />
<meta name="author" content="etc?" />


<meta name="date" content="2021-06-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="day-3-intoduction-to-r.html"/>
<link rel="next" href="day-5-building-workflows.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DLL 2021 R workshops</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Workshop introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-intent"><i class="fa fa-check"></i><b>1.1</b> Course intent</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#structure-and-resources"><i class="fa fa-check"></i><b>1.2</b> Structure and resources</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#this-syllabus-and-videos"><i class="fa fa-check"></i><b>1.2.1</b> This syllabus and videos</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#slack-channel"><i class="fa fa-check"></i><b>1.2.2</b> Slack channel</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#expectations"><i class="fa fa-check"></i><b>1.3</b> Expectations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Day 3 - intoduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#rstudio-and-basics"><i class="fa fa-check"></i><b>2.1</b> Rstudio, and basics</a></li>
<li class="chapter" data-level="2.2" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#data-exploration-pipelines"><i class="fa fa-check"></i><b>2.2</b> Data exploration pipelines</a></li>
<li class="chapter" data-level="2.3" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#getting-started-in-r"><i class="fa fa-check"></i><b>2.3</b> Getting started in R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#getting-help-in-r"><i class="fa fa-check"></i><b>2.3.1</b> Getting Help in R</a></li>
<li class="chapter" data-level="2.3.2" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#variables"><i class="fa fa-check"></i><b>2.3.2</b> Variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#working-with-vectors"><i class="fa fa-check"></i><b>2.3.3</b> Working with Vectors</a></li>
<li class="chapter" data-level="2.3.4" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#indexing-and-subsetting"><i class="fa fa-check"></i><b>2.3.4</b> Indexing and Subsetting</a></li>
<li class="chapter" data-level="2.3.5" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#using-logicals"><i class="fa fa-check"></i><b>2.3.5</b> Using Logicals</a></li>
<li class="chapter" data-level="2.3.6" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#working-with-dataframes"><i class="fa fa-check"></i><b>2.3.6</b> Working with Dataframes</a></li>
<li class="chapter" data-level="2.3.7" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#type-coercion-and-factors"><i class="fa fa-check"></i><b>2.3.7</b> Type Coercion and Factors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html"><i class="fa fa-check"></i><b>3</b> Day 4 - tidyverse and plots and such</a><ul>
<li class="chapter" data-level="3.1" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#reading-files"><i class="fa fa-check"></i><b>3.1</b> Reading files</a></li>
<li class="chapter" data-level="3.2" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#making-plots-with-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Making plots with ggplot2</a><ul>
<li class="chapter" data-level="3.2.1" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#getting-started-with-a-ggplot"><i class="fa fa-check"></i><b>3.2.1</b> Getting started with a ggplot</a></li>
<li class="chapter" data-level="3.2.2" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#plotting-numerical-vs.categorical-data"><i class="fa fa-check"></i><b>3.2.2</b> Plotting Numerical vs.Â Categorical Data</a></li>
<li class="chapter" data-level="3.2.3" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#plotting-error-bars"><i class="fa fa-check"></i><b>3.2.3</b> Plotting Error Bars</a></li>
<li class="chapter" data-level="3.2.4" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#plotting-trends-in-big-data"><i class="fa fa-check"></i><b>3.2.4</b> Plotting Trends in Big Data</a></li>
<li class="chapter" data-level="3.2.5" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#saving-your-figures"><i class="fa fa-check"></i><b>3.2.5</b> Saving Your Figures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html"><i class="fa fa-check"></i><b>4</b> Day 5 - building workflows</a><ul>
<li class="chapter" data-level="4.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#using-code-many-times---loops"><i class="fa fa-check"></i><b>4.1</b> Using code many times - loops</a></li>
<li class="chapter" data-level="4.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#writing-reusable-code"><i class="fa fa-check"></i><b>4.2</b> Writing (re)usable code</a><ul>
<li class="chapter" data-level="4.2.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#style-guides-can-be-inspiring"><i class="fa fa-check"></i><b>4.2.1</b> Style guides can be inspiring</a></li>
<li class="chapter" data-level="4.2.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#what-style-should-you-use"><i class="fa fa-check"></i><b>4.2.2</b> What style should you use?</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#writing-modular-code"><i class="fa fa-check"></i><b>4.3</b> Writing modular code</a><ul>
<li class="chapter" data-level="4.3.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#calculating-standard-error"><i class="fa fa-check"></i><b>4.3.1</b> Calculating standard error</a></li>
<li class="chapter" data-level="4.3.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#more-complex-modules"><i class="fa fa-check"></i><b>4.3.2</b> More complex modules</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#packages-are-chunks-of-code-and-sometimes-data"><i class="fa fa-check"></i><b>4.4</b> Packages are chunks of code (and sometimes data)</a><ul>
<li class="chapter" data-level="4.4.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#first-stop---cran"><i class="fa fa-check"></i><b>4.4.1</b> first stop - CRAN</a></li>
<li class="chapter" data-level="4.4.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#how-does-this-package-work"><i class="fa fa-check"></i><b>4.4.2</b> How does this package work?</a></li>
<li class="chapter" data-level="4.4.3" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#next-stop---github"><i class="fa fa-check"></i><b>4.4.3</b> next stop - github</a></li>
<li class="chapter" data-level="4.4.4" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#finally---bioconductor"><i class="fa fa-check"></i><b>4.4.4</b> finally - Bioconductor ð¬</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#finding-more-help-and-documentation"><i class="fa fa-check"></i><b>4.5</b> Finding more help and documentation</a></li>
<li class="chapter" data-level="4.6" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#reproducibility-and-sharing"><i class="fa fa-check"></i><b>4.6</b> Reproducibility and sharing</a></li>
<li class="chapter" data-level="4.7" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#reproducibility-and-sharing-1"><i class="fa fa-check"></i><b>4.7</b> Reproducibility and sharing</a></li>
<li class="chapter" data-level="4.8" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#finding-more-help-and-documentation-1"><i class="fa fa-check"></i><b>4.8</b> Finding more help and documentation</a></li>
<li class="chapter" data-level="4.9" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#reproducibility-and-sharing-2"><i class="fa fa-check"></i><b>4.9</b> Reproducibility and sharing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>5</b> Appendix</a><ul>
<li class="chapter" data-level="5.1" data-path="appendix.html"><a href="appendix.html#additional-tutorials"><i class="fa fa-check"></i><b>5.1</b> Additional tutorials</a><ul>
<li class="chapter" data-level="5.1.1" data-path="appendix.html"><a href="appendix.html#sub-sub-section"><i class="fa fa-check"></i><b>5.1.1</b> sub sub section</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="appendix.html"><a href="appendix.html#more-challenges"><i class="fa fa-check"></i><b>5.2</b> More challenges</a></li>
<li class="chapter" data-level="5.3" data-path="appendix.html"><a href="appendix.html#figures-ideas"><i class="fa fa-check"></i><b>5.3</b> Figures ideas</a></li>
<li class="chapter" data-level="5.4" data-path="appendix.html"><a href="appendix.html#rmd-example-of-code-chunk"><i class="fa fa-check"></i><b>5.4</b> Rmd example of code chunk</a></li>
<li class="chapter" data-level="5.5" data-path="appendix.html"><a href="appendix.html#more-example-rmds"><i class="fa fa-check"></i><b>5.5</b> More example Rmds</a></li>
<li class="chapter" data-level="5.6" data-path="appendix.html"><a href="appendix.html#how-to-edit-this-document"><i class="fa fa-check"></i><b>5.6</b> How to edit this document</a><ul>
<li class="chapter" data-level="5.6.1" data-path="appendix.html"><a href="appendix.html#setup"><i class="fa fa-check"></i><b>5.6.1</b> Setup</a></li>
<li class="chapter" data-level="5.6.2" data-path="appendix.html"><a href="appendix.html#editwork-on-it"><i class="fa fa-check"></i><b>5.6.2</b> Edit/work on it</a></li>
<li class="chapter" data-level="5.6.3" data-path="appendix.html"><a href="appendix.html#publishing-onto-the-main-page-so-its-hosted-at-the-url"><i class="fa fa-check"></i><b>5.6.3</b> Publishing onto the main page, so itâs hosted at the URL</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="appendix.html"><a href="appendix.html#more-links"><i class="fa fa-check"></i><b>5.7</b> More links</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DLL 2021, R section</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="day-4---tidyverse-and-plots-and-such" class="section level1">
<h1><span class="header-section-number">3</span> Day 4 - tidyverse and plots and such</h1>
<p>Today weâre going ot look at tidyverse and reading files and plots and such</p>

<div id="reading-files" class="section level2">
<h2><span class="header-section-number">3.1</span> Reading files</h2>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1">irisz &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/iris.csv&quot;</span>)</a>
<a class="sourceLine" id="cb119-2" data-line-number="2"><span class="kw">head</span>(irisz)</a></code></pre></div>
<pre><code>##   X Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1 1          5.1         3.5          1.4         0.2  setosa
## 2 2          4.9         3.0          1.4         0.2  setosa
## 3 3          4.7         3.2          1.3         0.2  setosa
## 4 4          4.6         3.1          1.5         0.2  setosa
## 5 5          5.0         3.6          1.4         0.2  setosa
## 6 6          5.4         3.9          1.7         0.4  setosa</code></pre>

</div>
<div id="making-plots-with-ggplot2" class="section level2">
<h2><span class="header-section-number">3.2</span> Making plots with ggplot2</h2>
<p><strong>Learning Goals:</strong></p>
<ul>
<li>List the roles of data, aesthetics, and geoms in ggplot functions.</li>
<li>Choose the correct aesthetics and alter the geom parameters for a scatter plot, histogram, or box plot.</li>
<li>Layer multiple geometries in a single plot.</li>
<li>Customize plot scales, titles, subtitles, themes, fonts, layout, and orientation.</li>
<li>Apply a facet to a plot.</li>
<li>Save a ggplot to a file.</li>
</ul>
<div id="getting-started-with-a-ggplot" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Getting started with a ggplot</h3>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb121-2" data-line-number="2"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>We will primarily be working in ggplot2 as it has the greatest degree of customization for visualization and offers many additional features over the basic plotting in R.</p>
<p>Most ggplot calls to create a figure take the following form (you can read more using <code>help(ggplot)</code>):</p>
<p><code>ggplot(data = &lt;DATA&gt;, mapping = aes(&lt;MAPPINGS&gt;)) + &lt;GEOM_FUNCTION&gt;()</code></p>
<p>We will practice using our mammalian sleep dataset. You can look up more info about this dataset using the <code>help</code> function and the dataset name, <code>msleep</code>.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="kw">head</span>(msleep)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 11
##   name    genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
##   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 Cheetah Acinâ¦ carni Carnâ¦ lc                  12.1      NA        NA      11.9
## 2 Owl moâ¦ Aotus omni  Primâ¦ &lt;NA&gt;                17         1.8      NA       7  
## 3 Mountaâ¦ Aploâ¦ herbi Rodeâ¦ nt                  14.4       2.4      NA       9.6
## 4 Greateâ¦ Blarâ¦ omni  Soriâ¦ lc                  14.9       2.3       0.133   9.1
## 5 Cow     Bos   herbi Artiâ¦ domesticated         4         0.7       0.667  20  
## 6 Three-â¦ Bradâ¦ herbi Piloâ¦ &lt;NA&gt;                14.4       2.2       0.767   9.6
## # â¦ with 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;</code></pre>
<p>You will first use the <code>ggplot()</code> function and bind the plot to a specific data frame using the data argument.</p>
<p><code>ggplot(data = msleep)</code></p>
<p>You will next need to define a mapping (using the aesthetic or <code>aes</code> function), by selecting the variables to be plotted and specifying how to present them in the graph, e.g.Â as x/y positions or characteristics such as size, shape, color, etc.</p>
<p><code>ggplot(data = msleep, aes(x = brainwt, y = sleep_rem))</code></p>
<p>You can then add âgeomsâ â graphical representations of the data in the plot (points, lines, bars). ggplot2 offers many different geoms. We will use some common ones today including:</p>
<ul>
<li><code>geom_point()</code> for scatter plots, dot plots, etc.</li>
<li><code>geom_boxplot()</code> for, well, boxplots!</li>
<li><code>geom_line()</code> for trend lines, time series, etc.</li>
</ul>
<p>To add a geom to the plot use the <code>+</code> operator. Because we have two continuous variables, letâs use <code>geom_point()</code> first:</p>
<p><code>ggplot(data = msleep, aes(x = brainwt, y = sleep_rem)) + geom_point()</code></p>
<p>To save your work-in-progress, you can assign the plot to a variable.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1">my_plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt, <span class="dt">y =</span> sleep_rem))</a></code></pre></div>
<p>We can now draw the plot as a scatterplot with points to represent each state.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1">my_plot <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a></code></pre></div>
<pre><code>## Warning: Removed 35 rows containing missing values (geom_point).</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>???</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1">msleep2 &lt;-<span class="st"> </span>msleep <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">brainwt_log =</span> <span class="kw">log</span>(brainwt))</a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="kw">ggplot</span>(msleep2, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a></code></pre></div>
<pre><code>## Warning: Removed 35 rows containing missing values (geom_point).</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>???</p>
<p>We can modify the appearance of the plot by changing aspects of the points we plot such as transparency (âalphaâ) and color.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep2, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>)</a></code></pre></div>
<pre><code>## Warning: Removed 35 rows containing missing values (geom_point).</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>It is also possible to scale the color of the points by some variable present in the data.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="kw">ggplot</span>(msleep2, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem, <span class="dt">color =</span> vore)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<pre><code>## Warning: Removed 35 rows containing missing values (geom_point).</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>When generating visualizations, it is important to annotate the figure with meaningful labels on the axes to make them accessible for the viewer.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1"><span class="kw">ggplot</span>(msleep2, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem, <span class="dt">color =</span> vore)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb133-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb133-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Brain Weight (log)&quot;</span>, </a>
<a class="sourceLine" id="cb133-4" data-line-number="4">       <span class="dt">y =</span> <span class="st">&quot;Duration of REM Sleep&quot;</span>)</a></code></pre></div>
<pre><code>## Warning: Removed 35 rows containing missing values (geom_point).</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<hr />
</div>
<div id="plotting-numerical-vs.categorical-data" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Plotting Numerical vs.Â Categorical Data</h3>
<p>We can create histograms in ggplot2 that are more aesthetically pleasing than the default <code>hist</code> function.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="kw">ggplot</span>(msleep, <span class="kw">aes</span>(<span class="dt">x =</span> sleep_total)) <span class="op">+</span></a>
<a class="sourceLine" id="cb135-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">10</span>)</a></code></pre></div>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>By adding a different parameter to <code>fill</code> in the <code>aes</code> we define throgh the <code>ggplot</code> function, we can separate out histograms according to different groupings such as here where we look at how total sleep distribution is distributed according to feeding behavior.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="kw">ggplot</span>(msleep, <span class="kw">aes</span>(<span class="dt">x =</span> sleep_total, <span class="dt">fill =</span> vore)) <span class="op">+</span></a>
<a class="sourceLine" id="cb136-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">10</span>)</a></code></pre></div>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>We can look at how many individuals in the dataset fall into each category, such as feeding behavior.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep, <span class="kw">aes</span>(<span class="dt">x =</span> vore)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb137-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>()</a></code></pre></div>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>We can look at how many total sleep distribution is distributed within each category of feeding behavior using separate box plots.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep, <span class="kw">aes</span>(<span class="dt">x =</span> vore, <span class="dt">y =</span> sleep_total)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>We can even drill down further and separate out another category, so that we can look at each feeding behavior and each conservation status (e.g.Â how the total sleep duration of domesticated herbivores compares to least concern carnivores).</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="kw">ggplot</span>(msleep, <span class="kw">aes</span>(<span class="dt">x =</span> vore, <span class="dt">y =</span> sleep_total, <span class="dt">color =</span> conservation)) <span class="op">+</span></a>
<a class="sourceLine" id="cb139-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_boxplot</span>() </a></code></pre></div>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<hr />
</div>
<div id="plotting-error-bars" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Plotting Error Bars</h3>
<p>Discrete Variables
ggplot(msleep2, aes(x = vore, y = awake)) +
geom_bar(stat = âidentityâ)</p>
<p>ggplot(msleep2, aes(x = vore, y = awake)) +
geom_bar(stat = âsummaryâ, fun = âmedianâ)</p>
<p>Error Bars
ggplot(df, aes(x,y)) + geom_bar(blahblah) + geom_errorbar()
you could do this, but then you need to have pre-calculated
the mean value for each group and the SE in your data</p>
<p>feeding.data &lt;- msleep2 %&gt;% group_by(vore) %&gt;%
summarize(mean_se(awake))
feeding.data</p>
<p>What does mean_se do?
?mean_se
y is the mean
ymin is mean - one SE
ymax is mean + one SE</p>
<p>ggplot(feeding.data, aes(x = vore, y = y)) +
geom_bar(stat = âidentityâ)</p>
<p>ggplot(feeding.data, aes(x = vore, y = y)) +
geom_bar(stat = âidentityâ) +
geom_errorbar(aes(ymin = ymin, ymax = ymax),
width = 0.2)</p>
<hr />
</div>
<div id="plotting-trends-in-big-data" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Plotting Trends in Big Data</h3>
<p>Lots of these different figures summarize or aggregate the data. We may want to display the data with the individual points, but still show the overall trend across the data.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep2, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_bin2d</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_density_2d</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>We can add a trendline with <code>geom_smooth</code> that you can check using <code>help(geom_smooth)</code>.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep2, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span></a>
<a class="sourceLine" id="cb141-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb141-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_smooth</span>()</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" data-line-number="1">msleep3 &lt;-<span class="st"> </span>msleep2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">bodywt_log =</span> <span class="kw">log</span>(bodywt))</a>
<a class="sourceLine" id="cb143-2" data-line-number="2"></a>
<a class="sourceLine" id="cb143-3" data-line-number="3">my.plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(msleep3, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> bodywt_log)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb143-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb143-5" data-line-number="5">my.plot</a></code></pre></div>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
<p>We can also do this with trendlines that summarize only certain subsets of the data, such as ?</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep2, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span></a>
<a class="sourceLine" id="cb144-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">color =</span> vore)) </a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>The above plot reflects the trends, but makes it hard to see the data that is contributing to each trend line. These differences can be most easily seen using <code>facet_wrap</code> or facetting that splits the figure into separate panel where the data has been filtered by the category (i.e. ?).</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep2, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span></a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">color =</span> vore)) <span class="op">+</span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4"><span class="st">    </span><span class="kw">facet_wrap</span>( <span class="op">~</span><span class="st"> </span>vore)</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="403-ggplot2_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<hr />
</div>
<div id="saving-your-figures" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Saving Your Figures</h3>
<p>If you want to save your images as a local individual file on your computer, there are two easy ways to do that.</p>
<p>The first method uses <code>ggsave</code> to save the most recent ggplot figure you generated.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1"><span class="kw">ggplot</span>(msleep2, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb148-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a>
<a class="sourceLine" id="cb148-3" data-line-number="3"><span class="kw">ggsave</span>(<span class="st">&quot;plot.png&quot;</span>, <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">height =</span> <span class="dv">5</span>)</a></code></pre></div>
<p>This function will save wherever your directory is currently. Check with <code>getwd()</code> and change with <code>setwd(folder name)</code>. You can also provide a precise file path in the new file name.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="kw">ggsave</span>(<span class="st">&quot;~/Downloads/plot.png&quot;</span>, <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">height =</span> <span class="dv">5</span>)</a></code></pre></div>
<p>Here is an alternative method for saving your figures:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="kw">pdf</span>(<span class="st">&quot;plot.pdf&quot;</span>) <span class="co"># creates the file</span></a>
<a class="sourceLine" id="cb150-2" data-line-number="2"><span class="co"># png() also works if you want a different file format</span></a>
<a class="sourceLine" id="cb150-3" data-line-number="3"><span class="kw">ggplot</span>(msleep2, <span class="kw">aes</span>(<span class="dt">x =</span> brainwt_log, <span class="dt">y =</span> sleep_rem)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb150-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a>
<a class="sourceLine" id="cb150-5" data-line-number="5"><span class="kw">dev.off</span>() <span class="co"># finishes editing the file</span></a></code></pre></div>
<p>Any changes to the figure that are contained between the initial creation of the figure (i.e.Â the <code>pdf</code> command) and the <code>dev.off</code> command will be included in the final saved image. However, the figure is being printed directly to the file it is writing and wonât appear elsewhere.</p>

</div>
</div>
</div>
<p style="margin-top:10em;text-align:center;font-size:small;">
    <a href="https://github.com/darachm/dll-r/blob/main/LICENSE.md">
        Licensed Creative Commons Attribution-NonCommercial-ShareAlike 4.0
    </a>
</p>
<p style="text-align:center;font-size:small;">
    <a href="https://github.com/rstudio/bookdown" target="blank">
        Website typeset with bookdown
    </a>
</p>
            </section>

          </div>
        </div>
      </div>
<a href="day-3-intoduction-to-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="day-5-building-workflows.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/darachm/dll-r/edit/main/400-day4-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DLL 2021 R syllabus site.html"],
"toc": {
"collapse": "subsection"
},
"highlight": "zenburn"
});
});
</script>

</body>

</html>
